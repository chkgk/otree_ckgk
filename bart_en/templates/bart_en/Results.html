{% extends "global/Base.html" %}
{% load staticfiles otree_tags %}

{% block title %}
    Results
{% endblock %}

{% block scripts %}

	<script src="https://code.highcharts.com/highcharts.js"></script>
	<script src="https://code.highcharts.com/modules/exporting.js"></script>
	<script type="text/javascript">
		$(function () {
			$('#lottery').highcharts({
				chart: {
					plotBackgroundColor: null,
					plotBorderWidth: null,
					plotShadow: false,
					type: 'pie',
					height: 200,
					width: 200
				},
				credits: { 
					enabled: false 
				},
				exporting: {
					enabled: false
				},
				tooltip: {
					enabled: false
				},
				title: {
					text: '',
				},
				plotOptions: {
					pie: {
						size: '100%',
						allowPointSelect: false,
						animation: false,
						dataLabels: {
							enabled: true,
							distance: -40,
							format: '{point.x}',
							color: 'black',
							style: {
								textShadow: false,
								fontSize: "18px"
							}
						},
						states: {
						   hover: {
							   enabled: false
						   }
					   }
					}
				},
				series: [{
					name: 'Auszahlung',
					colorByPoint: true,
					data: [{
						name: 'Right',
						color: '#6495ED',
						y: 50,
						x: {{ highpayoff }}
					}, {
						name: 'Left',
						color: 'Gold',
						y: 50,
						x: {{ lowpayoff }}
					}]
				}]
			});
		});
	</script>
{% endblock %}

{% block styles %}
	<style type="text/css">
		.lottery {
			width: 210px;
			height: 210px;
		}
	</style>
{% endblock %}

{% block content %}

	<p>
		The computer has randomly selected {{ player.payment_task }} for payment.
	</p>

	{% if player.payment_task == "Part 1" %}
		<p>
			You have chosen to play lottery {{ player.lottery_choice }}:
		</p>
		<div class="lottery" id="lottery"></div>

		<p>
			The computer's random draw has resulted in: {{ player.payoff }}.
		</p>
	{% endif %}


	{% if player.payment_task != "Part 1" %}
		<p>
			In this task, you have accumulated {{ player.payoff }}.
		</p>
	{% endif %}

	{% next_button %}

{% endblock %}


